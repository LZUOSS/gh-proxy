# GitHub Reverse Proxy Configuration Example
# Copy this file to config.yaml and customize for your environment
# All settings can be overridden with environment variables using the prefix GITHUB_PROXY_
# Example: GITHUB_PROXY_SERVER_HTTP_PORT=8080

server:
  http_port: 8080
  https_port: 8443
  enable_https: false
  tls_cert_file: ""
  tls_key_file: ""
  read_timeout: 30s
  write_timeout: 30s
  idle_timeout: 120s
  max_header_bytes: 1048576  # 1MB
  shutdown_timeout: 30s
  enable_graceful_shutdown: true

proxy:
  enabled: false
  type: socks5  # socks5, http, or https
  address: ""  # host:port format
  username: ""
  password: ""
  timeout: 30s
  dial_timeout: 10s
  keep_alive: 30s
  max_idle_conns: 100
  max_idle_conns_per_host: 10
  idle_conn_timeout: 90s

cache:
  enabled: true
  type: hybrid  # memory, disk, or hybrid
  max_memory_size: 104857600    # 100MB - total memory cache size
  max_memory_entries: 1000      # Maximum number of entries in memory cache (takes precedence over max_memory_size)
  max_disk_size: 1073741824     # 1GB
  disk_path: ./cache
  ttl: 1h
  cleanup_interval: 5m
  enable_compression: true

ratelimit:
  enabled: true
  requests_per_second: 100
  burst: 200
  strategy: ip  # ip, token, or both
  cleanup_interval: 1m
  ban_duration: 1h
  ban_threshold: 1000

auth:
  enabled: false
  type: token  # token, basic, or both
  tokens: []
  token_header: X-Auth-Token
  allow_anonymous: true
  require_auth: []  # Paths that require authentication

security:
  enable_ssrf_protection: true
  allowed_domains:
    - github.com
    - raw.githubusercontent.com
  blocked_ips: []
  block_private_ips: true
  max_request_size: 104857600  # 100MB
  enable_cors: true
  cors_allowed_origins:
    - "*"
  enable_hsts: false
  hsts_max_age: 31536000  # 1 year
  enable_csp: false
  csp_directives: ""

metrics:
  enabled: true
  port: 9090
  path: /metrics
  namespace: github_proxy

logging:
  level: info  # debug, info, warn, or error
  format: json  # json or text
  output: stdout  # stdout, stderr, or file
  file_path: ""
  max_size: 100  # megabytes
  max_backups: 3
  max_age: 28  # days
  compress: true
